<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.gaion.armoredVehicle.web.analysis.mapper.SdaMapper">

	<select id="findSda" parameterType="java.util.Map" resultType="kr.gaion.armoredVehicle.web.analysis.model.Sda">
		select *
		from SDA s
		where 1 = 1
		<if test='brgd != null'>
			and brgd = #{brgd}
		</if>
		<if test='bn != null'>
			and bn = #{bn}
		</if>
		<if test='brgdbncode != null'>
			and brgdbncode = #{brgdbncode}
		</if>
		<if test='divscode != null'>
			and divscode = #{divscode}
		</if>
		<if test='userid != null'>
			and s.divs like
			(select divs from USERCD uc where userid = #{userid})
		</if>
		<if test='sdaid != null'>
			and sdaid = #{sdaid}
		</if>
			order by divscode, brgdbncode
		<if test='page != null and pageSize != null'>
			limit #{page}, #{pageSize}
		</if>
	</select>


	<select id="findSdaIdBySdanm" parameterType="String" resultType="String">
		select SDAID
		from SDA
		where sdanm = #{sdanm}
	</select>

	<select id="countSda" parameterType="java.util.Map" resultType="Integer">
		select ifnull(count(*), 0)
		from SDA
		where  1 = 1
		<if test='divscode != null'>
			and divscode = #{divscode}
		</if>
		<if test='brgdbncode != null'>
			and brgdbncode = #{brgdbncode}
		</if>
	</select>

	<insert id="insertSda" parameterType="kr.gaion.armoredVehicle.web.analysis.model.Sda">
		insert into SDA (sdaid, sdanm, divs, rgstno, sn, acqdt, mfdt,
		crtdt, crtor, mdfcdt, mdfr, brgd, bn,
		rgstdt, sdatype, divscode, brgdbncode)
		values(#{sdaid}, #{sdanm}, #{divs}, #{rgstno}, #{sn}, #{acqdt}, #{mfdt},
		#{crtdt}, #{crtor}, #{mdfcdt}, #{mdfr}, #{brgd}, #{bn},
		#{rgstdt}, #{sdatype}, #{divscode}, #{brgdbncode})
	</insert>


	<update id="updateSda" parameterType="kr.gaion.armoredVehicle.web.analysis.model.Sda">
		update SDA
		set sdanm = #{sdanm}, divs = #{divs}, brgd = #{brgd}, bn = #{bn}, rgstno = #{rgstno},
		sn = #{sn}, mfdt = #{mfdt}, rgstdt = #{rgstdt}, acqdt = #{acqdt},
		sdatype = #{sdatype}, crtdt = #{crtdt}, crtor = #{crtor}, mdfcdt = #{mdfcdt},
		mdfr = #{mdfr}, divscode = #{divscode}, brgdbncode = #{brgdbncode}
		where sdaid = #{sdaid}
	</update>

	<select id="findByDivsCodeGroup" parameterType="String" resultType="kr.gaion.armoredVehicle.web.analysis.model.Sda">
		select *
		from SDA
		where divscode = #{divscode}
		group by divscode
	</select>

	<select id="findByBrgdbnCodeGroup" parameterType="String" resultType="kr.gaion.armoredVehicle.web.analysis.model.Sda">
		select *
		from SDA
		where brgdbncode = #{brgdbncode}
		group by brgdbncode
	</select>
</mapper>